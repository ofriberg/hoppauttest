const express = require("express");
const router = express.Router();
const axios = require("axios");

const auth = async ({ personalNumber }) => {
  const response = await axios({
    method: "get",
    headers: { "content-type": "application/json" },
    url: `http://localhost:5000/api/BankID/Auth?ip=127.0.0.1&personalNumber=${personalNumber}`
  }).then(r => r.data);

  return response;
};

const collect = async ({ orderRef }) => {
  const response = await axios({
    method: "get",
    headers: { "content-type": "application/json" },
    url: `http://localhost:5000/api/BankID/Collect?orderRef=${orderRef}`
  }).then(r => r.data);

  return response;
};

const poller = async ({ orderRef }) => {
  while (true) {
    const { status, hintCode, completionData } = await collect({ orderRef });
    console.log("status", status);
    if (status === "failed") {
      return { ok: false, status: hintCode };
    }
    if (status === "complete") {
      return { ok: true, status: completionData };
    }
    console.log(hintCode);

    await new Promise(resolve => setTimeout(resolve, 2000));
  }
};

router.get("/", async (request, response) => {
  const { personalNumber } = request.query;
  console.log("BANK GET EP");
  const result = await auth({ personalNumber });
  console.log("result", result);
  const { orderRef } = result;
  const pollingResult = await poller({ orderRef });
  console.log("pollingResult", pollingResult);

  if (pollingResult.ok) {
    const { status } = pollingResult;
    const { user } = status;
    response.status(200).json({ user });
  } else {
    response.status(400).json({ error: "some error" });
  }
});

module.exports = router;

/* 
    {
        "autoStartToken": "9bc02561-8988-49b8-ae71-b9d18c0dadcb",
        "orderRef": "648a68b2-8ab0-4cbe-bf89-c1109237bbc3"
    }
  */

/* 
    {
        "orderRef": "648a68b2-8ab0-4cbe-bf89-c1109237bbc3",
        "status": "pending",
        "hintCode": "noClient",
        "completionData": null
    }
  */
/* 
 {
    "orderRef": "648a68b2-8ab0-4cbe-bf89-c1109237bbc3",
    "status": "pending",
    "hintCode": "userSign",
    "completionData": null
}
 */

/* 
 {
    "orderRef": "648a68b2-8ab0-4cbe-bf89-c1109237bbc3",
    "status": "failed",
    "hintCode": "expiredTransaction",
    "completionData": null
}
{
    "orderRef": "aefd4eee-cd31-4616-bb61-596f0ffe7e64",
    "status": "failed",
    "hintCode": "userCancel",
    "completionData": null
}
 */

/* 
 
    "orderRef": "4d358e69-d940-40f4-8e12-af27687a2c4a",
    "status": "complete",
    "hintCode": null,
    "completionData": {
        "ocspResponse": "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",
        "signature": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PFNpZ25hdHVyZSB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC8wOS94bWxkc2lnIyI+PFNpZ25lZEluZm8geG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyMiPjxDYW5vbmljYWxpemF0aW9uTWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvVFIvMjAwMS9SRUMteG1sLWMxNG4tMjAwMTAzMTUiPjwvQ2Fub25pY2FsaXphdGlvbk1ldGhvZD48U2lnbmF0dXJlTWV0aG9kIEFsZ29yaXRobT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS8wNC94bWxkc2lnLW1vcmUjcnNhLXNoYTI1NiI+PC9TaWduYXR1cmVNZXRob2Q+PFJlZmVyZW5jZSBUeXBlPSJodHRwOi8vd3d3LmJhbmtpZC5jb20vc2lnbmF0dXJlL3YxLjAuMC90eXBlcyIgVVJJPSIjYmlkU2lnbmVkRGF0YSI+PFRyYW5zZm9ybXM+PFRyYW5zZm9ybSBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnL1RSLzIwMDEvUkVDLXhtbC1jMTRuLTIwMDEwMzE1Ij48L1RyYW5zZm9ybT48L1RyYW5zZm9ybXM+PERpZ2VzdE1ldGhvZCBBbGdvcml0aG09Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvMDQveG1sZW5jI3NoYTI1NiI+PC9EaWdlc3RNZXRob2Q+PERpZ2VzdFZhbHVlPnlIdlRsKzg3eUxCTTh4cWlUTEhOTjA4a1hWb2ZXanh0TmJGRVExQVRYVFE9PC9EaWdlc3RWYWx1ZT48L1JlZmVyZW5jZT48UmVmZXJlbmNlIFVSST0iI2JpZEtleUluZm8iPjxUcmFuc2Zvcm1zPjxUcmFuc2Zvcm0gQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy14bWwtYzE0bi0yMDAxMDMxNSI+PC9UcmFuc2Zvcm0+PC9UcmFuc2Zvcm1zPjxEaWdlc3RNZXRob2QgQWxnb3JpdGhtPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGVuYyNzaGEyNTYiPjwvRGlnZXN0TWV0aG9kPjxEaWdlc3RWYWx1ZT55MjlxTFY0LzJlWXZQMEl5eFJMaTZLSk1henZLU3V5TmI3cUpkbUdCM05jPTwvRGlnZXN0VmFsdWU+PC9SZWZlcmVuY2U+PC9TaWduZWRJbmZvPjxTaWduYXR1cmVWYWx1ZT5DTW5nUSsybXRjd1FoVlhJTGpKRERYZGNBQ3NHWEZYMzZqcTZkV3RnemJHT2l6M1VRSzAza3ppWTVURkI0WjNZbFVFM3dRRUo4TVBZbHJWbWw4WGU4dGxBcnVJalQ3Y2tYSVJma2hwNWxPclNhekpxNnRRM0JiR3kvSmMvZndSRkZpOUFRS3U3Uno3UVBZMUtuTWc2M1FjNkZubFRQVkxPSXRqTGkvOWluK2dPc2FjekpWNFJDWjFSQUdUN1FMQWY3NzZ1TVpZMkZNRnpHTVZkVHRMNmZJZ2pGL3FYcGEwVTk1VVBLYkZXSXJuWG1POXN0ZzFnWXFTZDZuUjVWLzhzTEJvZFVmK0ZpSlphUWZVY1o4VVlYSFNGWUNTL1dyclZGVEYyY0paUis0UFIyKzFCc0EvWDlJRUFkNmNWTDlvb0Z1eGFpclZsTzhoenl6SlMydHVKM3c9PTwvU2lnbmF0dXJlVmFsdWU+PEtleUluZm8geG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvMDkveG1sZHNpZyMiIElkPSJiaWRLZXlJbmZvIj48WDUwOURhdGE+PFg1MDlDZXJ0aWZpY2F0ZT5NSUlGVXpDQ0F6dWdBd0lCQWdJSWJpODhTNCtTcGN3d0RRWUpLb1pJaHZjTkFRRUxCUUF3ZURFTE1Ba0dBMVVFQmhNQ1UwVXhIVEFiQmdOVkJBb01GRlJsYzNSaVlXNXJJRUVnUVVJZ0tIQjFZbXdwTVJVd0V3WURWUVFGRXd3eE1URXhNVEV4TVRFeE1URXhNekF4QmdOVkJBTU1LbFJsYzNSaVlXNXJJRUVnUTNWemRHOXRaWElnUTBFeklIWXhJR1p2Y2lCQ1lXNXJTVVFnVkdWemREQWVGdzB4T1RFeE1UY3lNekF3TURCYUZ3MHlNVEV4TVRjeU1qVTVOVGxhTUlHME1Rc3dDUVlEVlFRR0V3SlRSVEVkTUJzR0ExVUVDZ3dVVkdWemRHSmhibXNnUVNCQlFpQW9jSFZpYkNreEVEQU9CZ05WQkFRTUIwWnlhV0psY21jeERqQU1CZ05WQkNvTUJVOXpZMkZ5TVJVd0V3WURWUVFGRXd3eE9UZzVNRFl3TVRBd05UWXhOVEF6QmdOVkJDa01MQ2d4T1RFeE1UZ2dNVFV1TWpZcElFOXpZMkZ5SUVaeWFXSmxjbWNnTFNCTmIySnBiSFFnUW1GdWEwbEVNUll3RkFZRFZRUUREQTFQYzJOaGNpQkdjbWxpWlhKbk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBdmZnbmtOUGRtWTJlVk5OYy9Dejd3N3ZoWmlwckZuUlhyTFBOamJCK0JROUZEZDdYeFN3S3RpR0w0cU5nNHpOSnRDOExyUVJhT3JVL3QydzRxT3ZaSFhiWjRYLzdRcDlDNnVCQlpueDhpS1AyOXJRMnBOWkEwNlhMN2hoR1ZMVnhLVFhuRFRzVHI3eXdHTU9FY1Jka29ycmp2dEVUQjRsdldjS2dLM1VKRlk3aTg1Yk5BS3VrMHJ5YWM4UUFGM0J4QjNBWFFJa0w3WjNuSkYxc0F4Y3kzOW9pME5jOVlkR3J2Nkt3TTZISUMzbGNCbHRpOUFreXU5QW4zV2pvMGVFNVMvVlZ5NXlKL1RjaHgwUzNSeWgxNE5MaWF0b2NNUkV2VlRYcFU1cmZGb0tkUXpJM2N3aHJNaU0zbURITUJxUUlFNHM5UUhGVkFmaXNENGo4ZkJ6TXNRSURBUUFCbzRHak1JR2dNRHNHQ0NzR0FRVUZCd0VCQkM4d0xUQXJCZ2dyQmdFRkJRY3dBWVlmYUhSMGNEb3ZMM1JsYzNRdWNtVjJiMk5oZEdsdmJuTjBZWFIxY3k1elpUQVJCZ05WSFNBRUNqQUlNQVlHQkNvREJCa3dEZ1lEVlIwUEFRSC9CQVFEQWdlQU1COEdBMVVkSXdRWU1CYUFGRktTRGlGdTZpS2wycFhITitlS1RQcnpFSzc3TUIwR0ExVWREZ1FXQkJUakxUc21XY016RDBjdDV3bG82NW1mQTJ3Q1RUQU5CZ2txaGtpRzl3MEJBUXNGQUFPQ0FnRUFRY2I5YjNERStIc3lhY3V5YU51Z3dtSWR2QktCUzVoOVVaYkExMjhFLytRVjlRblFhN3UzaHg0WCtnNnY0cFV3aFluSGk2VndQK0JVNjRVYi9mU0ZpOHc2dlA4emVGdDdLYjFhNU5wbmRnQmRzSndBajlreVNkQkM3ZENWT3llMEVKMWpyZmd4cFFORTJoM1VEVlVPcHF4K0RnZzNjRkw2bWdsUHJXbXdoSmpudkJ0eHRYMVBxMUNuTnZrYWxuOTJaWDBCQVV3a0tLaUtLUURHK0NwNHJDWm1MbjJEZXdZWGZHa1ZLd21tYW1KVkdnWFBLZk91cFcxM1J0SWxDWTRaYTh5VWd2b0dGeFg2RTdnNzFXY0hKZjBnNlRFLzFidzRpVlZwNW13VmV4aEllWklmWjdSaGEyYzVhTk5UdmMyWUg5NVBja01CY204a0tRejZ4SjNXM3htelB0MjlNSE9LWEJtSFlIUzR3RXlmSFAyNnZGSGV0SXlVUkhBMTN2SEtUc1o0bTZvYmJhWFJGdWNOYlAyVC9SaUtETzlrcnBvOUkzRVJaMDljL29ZK2tEVjFhWXFEa1N2MjFQUWVnNjVJc2xyU0xjd3BVcE00NzBNRnErcU95ZmliOWZkdk11Mm5WRnFCS05mTU9qanJwaWd1eitsZlZpeUZPTnZBeC9jc2dwWVNodlJubzJPdHMrVEdHbU5UY3ZFMFFvcHZETlQvbFAzUnNmd2RvZ2o5MWxoaTJIV09QME92eVBNaEpxc3RGaEJiM29rNlJUUHU0RGN6bzVhTnNSa0xnZ3E2RWpxcEFqS0FQam5IVTFuZWJvWkIyWVRCb25IRmVYbllndk9TK21xUC9DWk9SYXQrc05Ia0hqaVFuVHZPd3F0dHlLY0VyZWNYRTMrRDY1MD08L1g1MDlDZXJ0aWZpY2F0ZT48WDUwOUNlcnRpZmljYXRlPk1JSUYzakNDQThhZ0F3SUJBZ0lJRG5CNDJHVWxHdkV3RFFZSktvWklodmNOQVFFTkJRQXdiakVMTUFrR0ExVUVCaE1DVTBVeEhUQWJCZ05WQkFvTUZGUmxjM1JpWVc1cklFRWdRVUlnS0hCMVltd3BNUlV3RXdZRFZRUUZFd3d4TVRFeE1URXhNVEV4TVRFeEtUQW5CZ05WQkFNTUlGUmxjM1JpWVc1cklFRWdRMEVnZGpFZ1ptOXlJRUpoYm10SlJDQlVaWE4wTUI0WERURXhNRGt5TWpFME16TXlNMW9YRFRNME1USXdNVEUwTXpNeU0xb3dlREVMTUFrR0ExVUVCaE1DVTBVeEhUQWJCZ05WQkFvTUZGUmxjM1JpWVc1cklFRWdRVUlnS0hCMVltd3BNUlV3RXdZRFZRUUZFd3d4TVRFeE1URXhNVEV4TVRFeE16QXhCZ05WQkFNTUtsUmxjM1JpWVc1cklFRWdRM1Z6ZEc5dFpYSWdRMEV6SUhZeElHWnZjaUJDWVc1clNVUWdWR1Z6ZERDQ0FpSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnSVBBRENDQWdvQ2dnSUJBSm8wM0tNSjEvZng5NE9zT2JvT3hNQnFuN3BnamNwdnRSN1hGZDNIY3c4ejNGR2VhUjVFcnNZS2hMeTBweUJUajE1OHRzNnJPKy8wVjJvTndVRHZmNmgwWkN1cGJlUFhMYmU5ZzRDcDZueUFsejhzRFdZZG9oTFdtWldkZnQ0QktlTGw4MUVjMkVaaGNTaDNMMXJtLzhIdVcxOVdZb3g2VXBlNk82ang1UDhVMk1BOVVDejF5ZDFxZmtZbmVHVXdoTDZMK2Q3b0N3eFJOTG0yTmczcE9vY1dZaW16MUtzb09peFJXNUMyWHFqUld1VWFsOGFoeHRwKy9ubDlDcXBNbUo0WDk4dUlkdEg4UE9Yam8wcWF0RG1RYTZEQUhoRUExWG8wdVFMc2lEVktXYUtaNHJtUDNObzNPSmJMaVdEYy9BeVdSOVZ2akFkN21PUCtnU2JEU2JUK0VhZ0NtMlZhd1YzZkFDRk5XT2l1WjlDQzhoMWt2OUhCclk4ZzhzdExBMmxVNzNOanFLV1NlT2M4blJ1ekVTUFJTNmhDNkoxM2FiQnQ5MndsUFhwUTdNQlF5VWlZT2xWeThma2tNZ1lhRmFHUmNKT0xRWDBJSDUxUFBkb2NxbnVUd3FkTTlNeDNlZDliNFdIdnk2RU9LZXh4cS9OK09CQi9tYlZZdDE4dytwN0paaWVMa0VkTnNRcWVFQ1VsTDhsZjY5bzdmcGdkMmdyTGk2MktQZVNFZlIyK0lWTUh4UU4rVXBIaWpFMFZQWVljQ1k5bG1VZEVWc3hrc3dNTkM3eUZJcDRKM3RYanc5NDIvNjVueWpSYXltWGRzYjlpYS9CZFBpZ20zdzlhcmNoNFJQOEtKSkY2dXpXTTRyanBrbGhwMTRHOWN5S1RkMmNURExOcnFZbnhBZ01CQUFHamRqQjBNQjBHQTFVZERnUVdCQlJTa2c0aGJ1b2lwZHFWeHpmbmlrejY4eEN1K3pBUEJnTlZIUk1CQWY4RUJUQURBUUgvTUI4R0ExVWRJd1FZTUJhQUZLUHllSGtkSzBXS3llSEtsUW5sbm0vT3kwN0ZNQkVHQTFVZElBUUtNQWd3QmdZRUtnTUVHVEFPQmdOVkhROEJBZjhFQkFNQ0FRWXdEUVlKS29aSWh2Y05BUUVOQlFBRGdnSUJBREhIVVBrbkxrVlZ5RFd3TjQvdG1zZHA3VmswS2orTUY0amMvdTJzVUVaYkhSam1ta0lPcVBSNmw5QXBQcENSYVd1dXZaRnRiQ3VwZTVYdmtDbi9RRURLRkpMY3RtVjhRZUlZNXZWc0I0bDlvS2xNK2x6em91cFhJYmNYZjdGVXR2TldRNmdwNHk0YnBlbmM0aDVqSjRiUDl1b3hWdkNyakpCcEFOSE1lNHpMYWIwWUtwTlNhWXBqZlk4MUh1cnFZdnNsVkpIcWZlMGxXTDFpSG8zcndXd081Ky9pZlBBNGdMNnRoU0hERnEzc2xrOFRZTkRkYTZERnI2bE0xOXAwbjFQMXlHaUh3Mm5maDhZQlhqNWdCdXRBaklJeTcwdzdTNjg0aXpzSy9ZeUJVMGhscWlobGV3VmFaWDJFRWNTZDBxZWQ0SThHeU5raWM1T2xMVHJxNzZCdUVpNU5TYVI0V3R0QjlWSkltU2RmYlUyKzRaTXl1NUlvZmJWK3hZY0dYOE9MaUE0NjI5MURnbDhsWFVZcTlhQXhmYjZHNVh4VzZDRDgzMVpPRXMrdm9zVmd0NUxCMXZPRnRRcVI4cTlmZHBjNW9JL1Z2SEpIcmtVZjRGQmpCdzljVkxJa0NhNCtrL1dhK1BHVk1heHpCbGhHdUY3bnZPSktxejBrRTJFclk0SVhNbU0zZzlMR0RQSHN6cGtuYVhFZXRvUXZOOU5yU3VNcFJPUkNXVTdnU2lkM2M3WHp2WTBuTkJsdzUrNFhYYWpVUmwvMGNDckRvRFVXODUrM0VFOWZ3bmFaenhkazZNc3dOVTZEVVZOdXVncDNabXRQZ1B0QjBiOFdxYW54M2g5K2k2dVEwNENWSFZleWpzUW1DZ3B4c2wxTlljS3ZQN0tGczlSTWRDSEY8L1g1MDlDZXJ0aWZpY2F0ZT48WDUwOUNlcnRpZmljYXRlPk1JSUYwekNDQTd1Z0F3SUJBZ0lJVVltZmR0cXR5ODB3RFFZSktvWklodmNOQVFFTkJRQXdiVEVrTUNJR0ExVUVDZ3diUm1sdVlXNXphV1ZzYkNCSlJDMVVaV3R1YVdzZ1FrbEVJRUZDTVI4d0hRWURWUVFMREJaQ1lXNXJTVVFnVFdWdFltVnlJRUpoYm10eklFTkJNU1F3SWdZRFZRUUREQnRVWlhOMElFSmhibXRKUkNCU2IyOTBJRU5CSUhZeElGUmxjM1F3SGhjTk1URXdPVEl5TVRReE5UQXpXaGNOTXpReE1qTXhNVFF3TVRNeldqQnVNUXN3Q1FZRFZRUUdFd0pUUlRFZE1Cc0dBMVVFQ2d3VVZHVnpkR0poYm1zZ1FTQkJRaUFvY0hWaWJDa3hGVEFUQmdOVkJBVVREREV4TVRFeE1URXhNVEV4TVRFcE1DY0dBMVVFQXd3Z1ZHVnpkR0poYm1zZ1FTQkRRU0IyTVNCbWIzSWdRbUZ1YTBsRUlGUmxjM1F3Z2dJaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQ0R3QXdnZ0lLQW9JQ0FRQ1RxVTd1eGs1UXpiWFM2QXJYSUdUV05lWlh6NjViemRnb3hiNzlMdlloL3A3a2NLMjVtQTJ0ekdwTzNRUzFlS0pKdTg0RzlVTnptNG1NbDZjbmduWGNqeEVUWWlFcXRpanJBNW1mejg2NS9YNlVnT3BYN0Rrb3VROGQ1ZUR5aEo0OVVyRHFscmdvVk14MzIya00wU1o0aGVWZVg4M2UxSVNGaXl4cVpCS3hoMjV5S1lFWkE0RXpJckRqMnRpOENScldQSENUV2FJRnBjZDVUeU1ocFVUUG40RHp3UGhQR1dNUk54Z09BZVA0QlNEQjdSNmF6NHJveDdUUGtkMnNXRzFPRGovMElSUGhKUzFkUTFCN1FpTkhZNThSam5OVGhFUUt3ZFdXTVBNS1B0aFNkK0dFakw5R0RhZll4T3NJcktGWXdsWU5CVzNDNW1iZTNUKzNqK0F4ajZXMkhiZ21KWFBHSXRMdWN4WTFrUHdUOUw3dTVuSXhhUk9taDF1VHdZcXI5cHVHcTZzb0puZ2dFUzNLNFBJaE02a2Ftdm5DQ1BYb3FXQ0NydVNFUFZneUVaRWkwc2h5KzgxUXNlYjFnYzlyWWdWckVuTEJPSXlNcWFUdEV4YUZwcllidjFmL0F3V3RqRlVpMlhpU2ROOGFNcCtrcWJpKzF0S0pVVVBMQytDcmR1OWZGby84bHNsU2RldytTblBWRmVWejVDT0tidDZHVEU0eGNKZVJ6VzV3UTB3N2IrckdMV2hKdndSSnNTNUdYdnFhM0xnOEV5V2lMSnN3dVRGYUV3UFVEdlpCdnlGWkVaZXJ0S2daYlJZdmV6bzkvZ3J3eUIrbW9yVnJMcnl1OWNoWUVZd0U1NTB1enlLdHpYVXp5Z1Y4RnBYZTlEcG1wT1NmR01BVVJRSURBUUFCbzNZd2REQWRCZ05WSFE0RUZnUVVvL0o0ZVIwclJZcko0Y3FWQ2VXZWI4N0xUc1V3RHdZRFZSMFRBUUgvQkFVd0F3RUIvekFmQmdOVkhTTUVHREFXZ0JSSzk2TnFDTm9JT0JjWlV5akkycWJXTk5oYXVqQVJCZ05WSFNBRUNqQUlNQVlHQkNvREJBVXdEZ1lEVlIwUEFRSC9CQVFEQWdFR01BMEdDU3FHU0liM0RRRUJEUVVBQTRJQ0FRRFAxRG94akVqZXlHMjd4ZWFpK21weHhKb3FCMVJEVlRFWTg2UmROeWx1VUtRT0liZktKTW1YK0RYNHZUdVVRUzM1Mzl4ekhLd3BqNmdrK2laVmpGMVVvSnRHcCtxdXJqamFyT2g0NHMrK3MweVdLaUtySkJFbG9KbjhvK1lYRlQ4QzdlMVd0cUpWb2FGZERCQ3ZvaEp5SzIwUEtTNy9uVUc1YjdKNmlxMzUxN1l2amI0RDk0THQwZEhOU2dEMkJJSUhtTmtwU1lXZ3lpMXNlYXZoTjVBanRmSnI0cDEwMXUyU3NOY0xBcjQyQTVmcmFuOXZMMjlIamFNMk1UVThMME94b0lYOGxnY3BVeTl3Y2k3bEhRS09pd2FPY0lLZkNDMXFNN2xPNXowYzRQK28welQ2MTgzeEpWM3JtdzIyR0dZZDQwRUJxVzk3b3FCSzBJaitLbDVzdXljWjRKMnFLMWFWY2lZQlpzQk5sYnRtei9rOEh1Qnh5OVdiRWVQc1kvNjFJNTBmQkxTQWtWay9UZWE0aitOTkhKMWltcDdCbzE4YUxvOHBsYjllMmlaZUlEekgxdTY2bzBSRlliSGRuSkQ4Q25QZUJMVmdTdkVxbUJTMTFmZ0hyODEvdGs1bEp4Y0tlamRzRWZ0ekdReHd1SHcvcGpram9iSWt4cnJvWHBhNmlYb2tWeUg0YmUxNitmL2REYUVraDlSZjhMaDFVRVFQeHhwQ3lJU01pZkg1cEw3OERLaEduaDhWZmk3RWVzVVYxazZZM2VWQ0Z3MkNDS1djdlhzSmI5UXFMRnNEcUlsV1BoNmJCZ000YVhmcGUwYXJEcmdZUmJieDhMNm91aHl4QUh3anR6OWkwbFhleldNWDVmN1FZUkVNVEM1eUJQTlRUUDJmQ05zb3pRPT08L1g1MDlDZXJ0aWZpY2F0ZT48L1g1MDlEYXRhPjwvS2V5SW5mbz48T2JqZWN0PjxiYW5rSWRTaWduZWREYXRhIHhtbG5zPSJodHRwOi8vd3d3LmJhbmtpZC5jb20vc2lnbmF0dXJlL3YxLjAuMC90eXBlcyIgSWQ9ImJpZFNpZ25lZERhdGEiPjxzcnZJbmZvPjxuYW1lPlkyNDlSbEFnVkdWemRHTmxjblFnTWl4dVlXMWxQVlJsYzNRZ1lYWWdRbUZ1YTBsRUxITmxjbWxoYkU1MWJXSmxjajB4TWpNME5UWTNPQ3h2UFZSbGMzUmlZVzVySUVFZ1FVSWdLSEIxWW13cExHTTlVMFU9PC9uYW1lPjxub25jZT5lYitiRmc0OTl5U3JWMVoxMkVESGtmNVZSWmc9PC9ub25jZT48ZGlzcGxheU5hbWU+VkdWemRDQmhkaUJDWVc1clNVUT08L2Rpc3BsYXlOYW1lPjwvc3J2SW5mbz48Y2xpZW50SW5mbz48ZnVuY0lkPklkZW50aWZpY2F0aW9uPC9mdW5jSWQ+PHZlcnNpb24+Tnk0eE5TNHlNUT09PC92ZXJzaW9uPjxlbnY+PGFpPjx0eXBlPlNVOVQ8L3R5cGU+PGRldmljZUluZm8+TVRNdU15NHg8L2RldmljZUluZm8+PHVoaT5qRDF3MHdDd2l3QVlDTS9BM3hwOEJPYU42NDg9PC91aGk+PGZzaWI+MDwvZnNpYj48dXRiPmNzMTwvdXRiPjxyZXF1aXJlbWVudD48Y29uZGl0aW9uPjx0eXBlPkFsbG93RmluZ2VycHJpbnQ8L3R5cGU+PHZhbHVlPnllczwvdmFsdWU+PC9jb25kaXRpb24+PGNvbmRpdGlvbj48dHlwZT5DZXJ0aWZpY2F0ZVBvbGljaWVzPC90eXBlPjx2YWx1ZT4xLjIuMy40LjI1PC92YWx1ZT48L2NvbmRpdGlvbj48L3JlcXVpcmVtZW50Pjx1YXV0aD5wdzwvdWF1dGg+PC9haT48L2Vudj48L2NsaWVudEluZm8+PC9iYW5rSWRTaWduZWREYXRhPjwvT2JqZWN0PjwvU2lnbmF0dXJlPg==",
        "cert": {
            "notAfter": "1637189999000",
            "notBefore": "1574031600000"
        },
        "device": {
            "ipAddress": "78.82.217.121"
        },
        "user": {
            "givenName": "Oscar",
            "name": "Oscar Friberg",
            "personalNumber": "198906010056",
            "surname": "Friberg"
        }
    }
}
 */

/* 
  
var intervalID = window.setInterval(checkWeatherAPI, 1000);

function checkWeatherAPI() {
  // go check API
    var d = new Date();
    var n = d.getSeconds();
    console.log(n);
    if (n === 25) {
        window.clearInterval(intervalID);
    }

}
  */
